# 各フォルダのサイズを計測する du コマンド相当

##  0 . 必要なソフト

- Visual Studio 2022 Community 以上. Visual Basic を利用
    - https://visualstudio.microsoft.com/ja/vs/community/

##  1. クローン

```
git clone https://gitlab.com/takahiro-itou-vb6-upgrade-net/BackupTool.git
```

##  2. ビルド

###  2.1. IDE を使う場合

- BackupTool フォルダ内のソリューションファイル BackupTool.sln を IDE で開きます。
- 構成マネージャで Release か Debug を選びます。
- メニューの「ビルド」- 「ソリューションのリビルド」を選択します。

###  2.2. コマンドプロンプトを使う場合

- スタートメニューから「Visual Studio 2022」- 「x64 Native Tools Command Prompt for VS 2022」を選択
- カレントフォルダをクローンした場所に移動します。

```
cd BackupTool
REM カレントフォルダに .sln ファイルがあることを確認します
msbuild /restore /t:Rebuild /p:Platform="Any CPU" /p:Configuration=Release
```

- 詳しくは Rebuild.bat をご覧ください。

##  3. 使い方

- ロケールが日本の場合のみ、日本語にローカライズされます。
- それ以外のデフォルトのロケールでは英語で表示されます。多分。
- メニューの [Open Selected Directory / 選択したフォルダを開く] をクリックすると、
フォルダ選択ダイアログが表示されます。
    - そこで選択したフォルダ以下、サブディレクトリを含めて検索を行います。
- メニューの [Open Anime Storage Drive / アニメ保存用ドライブを開く]
をクリックすると、選択ダイアログは表示せずに F: ドライブを対象にします。
- メニューの [Open Recording Drive / 録画データ保存ドライブを開く]
をクリックすると、選択ダイアログは表示せずに L: ドライブを対象にします.
- 検索には、ファイル・フォルダ数に依存しますが、時間がかかります。
- 検索が終わると、左側ペインにフォルダツリーが表示されます。
- そこでフォルダを選択すると、右側ペインにサイズ等の情報が表示されます。

###  3.1. 表示内容

|項番|   項目名   |   項目名   |                       説明                       |
|---:|:-----------|:-----------|:-------------------------------------------------|
|  1 | 名前       | Name       |ファイルまたはフォルダの名前                      |
|  2 | サイズ     | Total Size |バイト単位。フォルダの場合はフォルダ内の合計 (*1) |
|  3 | フォルダ数 | # Folders  |フォルダ内に含まれるサブフォルダの総数 (*2)       |
|  4 | ファイル数 | # Files    |フォルダ内に含まれるファイルの総数 (*2)           |
|  5 | wmv サイズ | wmv Size   |拡張子が .wmv のファイルのサイズ合計 (*1)         |
|  6 | mpg サイズ | mpg Size   |拡張子が .mpg のファイルのサイズ合計 (*1)         |
|  7 | wmv 数     | # wmv      |拡張子が .wmv のファイルの個数 (*2)               |
|  8 | mpg 数     | # mpg      |拡張子が .mpg のファイルの個数 (*2)               |
|  9 | 更新日時   | Time Stamp |ファイルの更新日時                                |

- (*1) サブフォルダ、孫フォルダ、および孫より深い場所にある全ファイルも含みます。単位はバイト数。
- (*2) 同様にサブフォルダだけでなく、孫フォルダや、孫より深い場所にある全フォルダを含みます。

###  3.2. 注意事項

1. サイズは実際のファイルサイズです。ディスク上のサイズではありませんので、本来の du よりは小さく表示されます。

##  4. 既知のバグ

1. ハードリンクやジャンクションがあると、二重にカウントする筈です。

以上
